<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VIZARD âš¡ Premium Neon Store</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Premium Theme -->
  <link rel="stylesheet" href="assets/css/style.css">

  <style>
    /* ENHANCED PRELOADER */
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--primary-bg);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }

    .loader-circle {
      width: 60px;
      height: 60px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top: 3px solid var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite, glow 2s ease-in-out infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes glow {
      0%, 100% { box-shadow: 0 0 20px var(--accent-glow); }
      50% { box-shadow: 0 0 40px var(--accent-glow), 0 0 60px rgba(255, 45, 149, 0.3); }
    }

    /* ENHANCED NAVBAR - MOBILE FRIENDLY */
    .navbar-premium {
      background: rgba(10, 0, 20, 0.95) !important;
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255, 45, 149, 0.2);
      padding: 12px 0;
    }

    .logo-premium {
      font-size: 1.8rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-secondary) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .search-bar-premium {
      background: rgba(255, 255, 255, 0.08) !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
      border-radius: 50px !important;
      color: white !important;
      padding: 10px 20px;
      transition: all 0.3s ease;
      width: 100%;
      max-width: 400px;
    }

    /* MOBILE RESPONSIVE */
    @media (max-width: 768px) {
      .navbar-premium .container {
        padding: 0 15px;
      }
      
      .logo-premium {
        font-size: 1.5rem;
      }
      
      .search-bar-premium {
        margin: 10px 0;
        max-width: 100%;
      }
    }

    /* HERO SECTION */
    .hero-section {
      background: linear-gradient(135deg, rgba(255,45,149,0.1) 0%, rgba(38,211,255,0.1) 100%);
      border-radius: 20px;
      padding: 40px 20px;
      margin: 20px 0;
      text-align: center;
    }

    /* CATEGORIES - MOBILE FRIENDLY */
    .categories-container {
      overflow-x: auto;
      padding: 10px 0;
      margin: 20px 0;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .categories-container::-webkit-scrollbar {
      display: none;
    }

    .categories-scroll {
      display: flex;
      gap: 10px;
      padding: 0 10px;
      min-width: min-content;
    }

    .category-btn-premium {
      background: rgba(255, 255, 255, 0.05) !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
      border-radius: 50px !important;
      padding: 10px 20px !important;
      color: var(--text-primary) !important;
      transition: all 0.3s ease !important;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .category-btn-premium.active {
      background: linear-gradient(135deg, var(--accent) 0%, #ff4da6 100%) !important;
      border-color: transparent !important;
      transform: scale(1.05);
    }

    /* PRODUCT CARDS - MOBILE OPTIMIZED */
    .product-card-premium {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 15px;
      overflow: hidden;
      transition: all 0.3s ease;
      height: 100%;
      cursor: pointer;
    }

    .product-card-premium:hover {
      transform: translateY(-5px);
      border-color: var(--accent);
      box-shadow: 0 15px 30px rgba(255, 45, 149, 0.3);
    }

    .product-image-premium {
      width: 100%;
      height: 180px;
      object-fit: contain;
      background: linear-gradient(135deg, #150013 0%, #1a0018 100%);
      padding: 15px;
    }

    .product-badge-premium {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, var(--accent) 0%, #ff4da6 100%);
      color: white;
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 11px;
      font-weight: 600;
    }

    /* ACTION BUTTONS - VISIBLE AND WORKING */
    .product-actions {
      display: flex !important;
      gap: 8px;
      margin-top: 10px;
    }

    .btn-add-cart {
      background: rgba(38, 211, 255, 0.2);
      border: 1px solid var(--accent-secondary);
      border-radius: 8px;
      padding: 8px 12px;
      font-size: 12px;
      color: var(--accent-secondary);
      transition: all 0.3s ease;
      flex: 1;
      cursor: pointer;
    }

    .btn-add-cart:hover {
      background: var(--accent-secondary);
      color: black;
      transform: scale(1.05);
    }

    .btn-buy-now {
      background: rgba(255, 45, 149, 0.2);
      border: 1px solid var(--accent);
      border-radius: 8px;
      padding: 8px 12px;
      font-size: 12px;
      color: var(--accent);
      transition: all 0.3s ease;
      flex: 1;
      cursor: pointer;
    }

    .btn-buy-now:hover {
      background: var(--accent);
      color: white;
      transform: scale(1.05);
    }

    /* SHIMMER LOADING */
    .shimmer-premium {
      height: 280px;
      border-radius: 15px;
      background: linear-gradient(90deg, #1a0010 0%, #2d0020 50%, #1a0010 100%);
      background-size: 200% 100%;
      animation: shimmer 1.6s infinite;
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
  </style>
</head>

<body>

  <!-- PREMIUM PRELOADER -->
  <div id="preloader">
    <div class="loader-circle"></div>
  </div>

  <!-- ENHANCED NAVBAR -->
  <nav class="navbar navbar-premium navbar-expand-lg sticky-top">
    <div class="container">
      <div class="d-flex flex-column flex-md-row align-items-stretch align-items-md-center gap-2 w-100">

        <h1 class="logo-premium m-0 text-center text-md-start">VIZARD âš¡</h1>

        <input id="searchInput" class="form-control search-bar-premium" placeholder="ðŸ” Search products..."/>

        <div class="d-flex justify-content-center gap-2">
          <a href="admin-login.html" class="btn btn-outline-light btn-sm">Admin</a>
          <a href="cart.html" class="btn btn-premium btn-sm position-relative">
            ðŸ›’ 
            <span id="cartCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6em;">0</span>
          </a>
        </div>

      </div>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <div class="container">
    <div class="hero-section">
      <h1 class="text-gradient display-6 display-md-4 fw-bold mb-3">Welcome to VIZARD</h1>
      <p class="lead text-light mb-4">Experience premium shopping with fast delivery</p>
    </div>
  </div>

  <!-- ENHANCED CATEGORY FILTER - MOBILE FRIENDLY -->
  <div class="container">
    <div class="categories-container">
      <div class="categories-scroll">
        <button class="btn category-btn-premium active" data-cat="All">ðŸŒŸ All</button>
        <button class="btn category-btn-premium" data-cat="Mobiles">ðŸ“± Mobiles</button>
        <button class="btn category-btn-premium" data-cat="Electronics">ðŸ’» Electronics</button>
        <button class="btn category-btn-premium" data-cat="Clothing">ðŸ‘• Fashion</button>
        <button class="btn category-btn-premium" data-cat="Accessories">ðŸŽ§ Accessories</button>
      </div>
    </div>
  </div>

  <!-- PREMIUM PRODUCT GRID -->
  <div class="container mb-5">
    <div id="productList" class="row g-3">

      <!-- Enhanced Shimmer Placeholders -->
      <div class="col-6 col-md-4 col-lg-3">
        <div class="shimmer-premium"></div>
      </div>
      <div class="col-6 col-md-4 col-lg-3">
        <div class="shimmer-premium"></div>
      </div>
      <div class="col-6 col-md-4 col-lg-3">
        <div class="shimmer-premium"></div>
      </div>
      <div class="col-6 col-md-4 col-lg-3">
        <div class="shimmer-premium"></div>
      </div>

    </div>
  </div>

  <script>
    // PRELOADER REMOVAL
    window.addEventListener('load', function() {
      setTimeout(() => {
        document.getElementById('preloader').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('preloader').style.display = 'none';
        }, 500);
      }, 1000);
    });

    // SAMPLE PRODUCTS - FIXED WITH PROPER CATEGORIES
    function initializeSampleProducts() {
      if (!localStorage.getItem('products')) {
        const sampleProducts = [
          {
            name: "iPhone 15 Pro",
            price: 129999,
            category: "Mobiles",
            desc: "Latest Apple smartphone with advanced camera",
            img: "https://via.placeholder.com/300x300/150013/ffffff?text=iPhone+15"
          },
          {
            name: "Samsung Galaxy S24",
            price: 89999,
            category: "Mobiles",
            desc: "Android flagship with amazing display",
            img: "https://via.placeholder.com/300x300/150013/ffffff?text=Galaxy+S24"
          },
          {
            name: "MacBook Air M2",
            price: 114999,
            category: "Electronics", 
            desc: "Powerful laptop for work and creativity",
            img: "https://via.placeholder.com/300x300/150013/ffffff?text=MacBook"
          },
          {
            name: "Wireless Headphones",
            price: 4999,
            category: "Accessories",
            desc: "Premium sound quality with noise cancellation",
            img: "https://via.placeholder.com/300x300/150013/ffffff?text=Headphones"
          },
          {
            name: "Designer T-Shirt",
            price: 1999,
            category: "Clothing",
            desc: "Comfortable cotton t-shirt with modern design",
            img: "https://via.placeholder.com/300x300/150013/ffffff?text=T-Shirt"
          },
          {
            name: "Smart Watch",
            price: 12999,
            category: "Accessories",
            desc: "Track your fitness and notifications",
            img: "https://via.placeholder.com/300x300/150013/ffffff?text=Smart+Watch"
          }
        ];
        localStorage.setItem('products', JSON.stringify(sampleProducts));
      }
    }

    // ENHANCED PRODUCT CARD GENERATION WITH ADD TO CART
    function loadProducts(arr) {
      const productList = document.getElementById('productList');
      productList.innerHTML = '';

      if (arr.length === 0) {
        productList.innerHTML = `
          <div class="col-12 text-center">
            <div class="p-5">
              <h3 class="text-light mb-3">No Products Found</h3>
              <p class="text-secondary">Try adjusting your search or browse different categories</p>
            </div>
          </div>
        `;
        return;
      }

      arr.forEach((product, index) => {
        productList.innerHTML += `
          <div class="col-6 col-md-4 col-lg-3">
            <div class="product-card-premium h-100" onclick="openProduct(${index})">
              <div class="position-relative">
                <img src="${product.img}" class="product-image-premium" alt="${product.name}">
                <span class="product-badge-premium">â‚¹${product.price.toLocaleString()}</span>
              </div>
              <div class="p-3 d-flex flex-column h-100">
                <h6 class="text-light mb-2 flex-grow-1">${product.name}</h6>
                <p class="text-secondary small mb-2">${product.category}</p>
                
                <div class="product-actions">
                  <button class="btn-add-cart" onclick="event.stopPropagation(); addToCart(${index});">
                    ðŸ›’ Cart
                  </button>
                  <button class="btn-buy-now" onclick="event.stopPropagation(); buyNow(${index});">
                    âš¡ Buy
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      });
    }

    // ADD TO CART FUNCTIONALITY - WORKING
    function addToCart(productIndex) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const product = products[productIndex];
      
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      
      // Check if product already in cart
      const existingItem = cart.find(item => item.name === product.name);
      
      if (existingItem) {
        existingItem.qty = (existingItem.qty || 1) + 1;
      } else {
        const productCopy = {...product}; // Create copy to avoid reference issues
        productCopy.qty = 1;
        cart.push(productCopy);
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      
      // Show success message
      showNotification('âœ… Added to cart!');
    }

    // BUY NOW FUNCTIONALITY - WORKING
    function buyNow(productIndex) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const product = products[productIndex];
      
      // Add to cart and redirect to checkout
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      const productCopy = {...product}; // Create copy
      productCopy.qty = 1;
      cart = [productCopy]; // Replace cart with single item for buy now
      localStorage.setItem('cart', JSON.stringify(cart));
      localStorage.setItem('buyNow', 'true');
      
      window.location.href = 'checkout.html';
    }

    // VIEW PRODUCT DETAILS - WORKING
    function openProduct(id) {
      localStorage.setItem("viewProduct", id);
      window.location.href = "detail.html";
    }

    // CATEGORY FILTERS - FIXED AND WORKING
    function setupCategoryFilters() {
      document.querySelectorAll('.category-btn-premium').forEach(btn => {
        btn.addEventListener('click', function() {
          // Remove active class from all buttons
          document.querySelectorAll('.category-btn-premium').forEach(b => b.classList.remove('active'));
          // Add active class to clicked button
          this.classList.add('active');
          
          const category = this.getAttribute('data-cat');
          const products = JSON.parse(localStorage.getItem('products')) || [];
          
          if (category === 'All') {
            loadProducts(products);
          } else {
            const filtered = products.filter(p => p.category === category);
            loadProducts(filtered);
          }
        });
      });
    }

    // SEARCH FUNCTIONALITY - WORKING
    function setupSearch() {
      document.getElementById('searchInput').addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const products = JSON.parse(localStorage.getItem('products')) || [];
        
        if (searchTerm === '') {
          // Show products based on active category
          const activeCategory = document.querySelector('.category-btn-premium.active').getAttribute('data-cat');
          if (activeCategory === 'All') {
            loadProducts(products);
          } else {
            const filtered = products.filter(p => p.category === activeCategory);
            loadProducts(filtered);
          }
          return;
        }

        const filteredProducts = products.filter(product => 
          product.name.toLowerCase().includes(searchTerm) ||
          product.category.toLowerCase().includes(searchTerm) ||
          product.desc.toLowerCase().includes(searchTerm)
        );

        loadProducts(filteredProducts);
      });
    }

    // UPDATE CART COUNT - WORKING
    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      document.getElementById('cartCount').textContent = cart.reduce((total, item) => total + (item.qty || 1), 0);
    }

    // NOTIFICATION SYSTEM - WORKING
    function showNotification(message) {
      // Remove existing notifications
      document.querySelectorAll('.custom-notification').forEach(n => n.remove());
      
      const notification = document.createElement('div');
      notification.className = 'custom-notification alert alert-success position-fixed';
      notification.style.cssText = `
        top: 20px;
        right: 20px;
        z-index: 9999;
        min-width: 200px;
        animation: slideInRight 0.3s ease-out;
        background: rgba(0, 255, 136, 0.9) !important;
        border: 1px solid #00ff88 !important;
        color: #000 !important;
        font-weight: 600;
      `;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 2000);
    }

    // Add CSS animations for notifications
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideInRight {
        0% { transform: translateX(100%); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOutRight {
        0% { transform: translateX(0); opacity: 1; }
        100% { transform: translateX(100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);

    // Initialize everything
    document.addEventListener('DOMContentLoaded', function() {
      initializeSampleProducts();
      setTimeout(() => {
        const products = JSON.parse(localStorage.getItem('products')) || [];
        loadProducts(products);
        updateCartCount();
        setupCategoryFilters();
        setupSearch();
      }, 800);
    });
  </script>

</body>
</html>