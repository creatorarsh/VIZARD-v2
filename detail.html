<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details ‚ö° VIZARD</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Premium Theme -->
  <link rel="stylesheet" href="assets/css/style.css">

  <style>
    body {
      background: linear-gradient(135deg, var(--primary-bg) 0%, #1a0030 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .detail-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* IMAGE SLIDER STYLES */
    .image-slider-container {
      position: relative;
      background: linear-gradient(135deg, #150013 0%, #1a0018 100%);
      border-radius: 15px;
      padding: 20px;
      border: 2px solid rgba(255, 255, 255, 0.1);
    }

    .main-image {
      width: 100%;
      height: 400px;
      object-fit: contain;
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .thumbnail-container {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 10px 0;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    .thumbnail-container::-webkit-scrollbar {
      display: none;
    }

    .thumbnail {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .thumbnail:hover, .thumbnail.active {
      border-color: var(--accent);
      transform: scale(1.1);
    }

    .slider-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.2);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: white;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .slider-btn:hover {
      background: var(--accent);
      transform: translateY(-50%) scale(1.1);
    }

    .slider-prev {
      left: 10px;
    }

    .slider-next {
      right: 10px;
    }

    /* ZOOM FEATURE */
    .zoom-container {
      position: relative;
      overflow: hidden;
      border-radius: 10px;
    }

    .zoomable-image {
      transition: transform 0.3s ease;
      cursor: zoom-in;
    }

    .zoomable-image.zoomed {
      transform: scale(1.5);
      cursor: zoom-out;
    }

    .detail-box {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 20px;
    }

    .btn-detail-cart {
      background: rgba(38, 211, 255, 0.2);
      border: 1px solid var(--accent-secondary);
      border-radius: 12px;
      padding: 15px;
      font-weight: 600;
      color: var(--accent-secondary);
      transition: all 0.3s ease;
      width: 100%;
    }

    .btn-detail-cart:hover {
      background: var(--accent-secondary);
      color: black;
      transform: translateY(-2px);
    }

    .btn-detail-buy {
      background: linear-gradient(135deg, var(--accent) 0%, #ff4da6 100%);
      border: none;
      border-radius: 12px;
      padding: 15px;
      font-weight: 600;
      color: white;
      transition: all 0.3s ease;
      width: 100%;
    }

    .btn-detail-buy:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255, 45, 149, 0.5);
    }

    .related-card {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 15px;
      transition: all 0.3s ease;
      cursor: pointer;
      text-align: center;
    }

    .related-card:hover {
      transform: translateY(-5px);
      border-color: var(--accent);
      box-shadow: 0 10px 25px rgba(255, 45, 149, 0.3);
    }

    .related-card img {
      height: 120px;
      width: 100%;
      object-fit: contain;
      background: #150013;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    /* PRODUCT SPECIFICATIONS */
    .specs-table {
      width: 100%;
      border-collapse: collapse;
    }

    .specs-table td {
      padding: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .specs-table tr:last-child td {
      border-bottom: none;
    }

    .spec-label {
      color: var(--text-secondary);
      width: 40%;
    }

    .spec-value {
      color: var(--text-primary);
      font-weight: 500;
    }

    @media (max-width: 768px) {
      .main-image {
        height: 300px;
      }
      
      .thumbnail {
        width: 60px;
        height: 60px;
      }
      
      .slider-btn {
        width: 35px;
        height: 35px;
        font-size: 16px;
      }
      
      .btn-detail-cart, .btn-detail-buy {
        padding: 12px;
        font-size: 14px;
      }
    }
  </style>
</head>

<body>

  <div class="detail-container">

    <a href="index.html" class="btn btn-premium mb-4">‚Üê Back to Store</a>

    <div class="row g-4">

      <!-- PRODUCT IMAGE SLIDER -->
      <div class="col-md-6">
        <div class="image-slider-container">
          <!-- Main Image -->
          <div class="zoom-container">
            <img id="mainImage" class="main-image zoomable-image" src="" alt="Product Image" onclick="toggleZoom()">
          </div>
          
          <!-- Navigation Buttons -->
          <button class="slider-btn slider-prev" onclick="changeImage(-1)">‚ùÆ</button>
          <button class="slider-btn slider-next" onclick="changeImage(1)">‚ùØ</button>
          
          <!-- Thumbnails -->
          <div class="thumbnail-container" id="thumbnailContainer"></div>
        </div>
      </div>

      <!-- PRODUCT DETAILS -->
      <div class="col-md-6">
        <div class="detail-box">
          <h1 id="detailName" class="text-light mb-3"></h1>
          
          <div class="d-flex align-items-center gap-3 mb-3">
            <h2 class="text-success mb-0">‚Çπ<span id="detailPrice"></span></h2>
            <span class="badge bg-primary">‚≠ê 4.5</span>
            <span class="badge bg-success" id="stockStatus">In Stock</span>
          </div>

          <p id="detailDesc" class="text-light mb-4"></p>

          <!-- Color Variants -->
          <div class="mb-4">
            <h6 class="text-light mb-2">Colors:</h6>
            <div class="d-flex gap-2" id="colorVariants"></div>
          </div>

          <!-- Action Buttons -->
          <div class="row g-3 mb-4">
            <div class="col-6">
              <button class="btn-detail-cart" onclick="addToCartFromDetail()">
                üõí Add to Cart
              </button>
            </div>
            <div class="col-6">
              <button class="btn-detail-buy" onclick="buyNowFromDetail()">
                ‚ö° Buy Now
              </button>
            </div>
          </div>

          <!-- Product Specifications -->
          <div class="mt-4">
            <h5 class="text-light mb-3">üìã Specifications</h5>
            <table class="specs-table" id="specsTable"></table>
          </div>
        </div>
      </div>

    </div>

    <!-- RELATED PRODUCTS -->
    <h3 class="text-light mt-5 mb-3">üî• Related Products</h3>
    <div class="row g-3" id="relatedBox"></div>

  </div>

  <script>
    // PRODUCT DATA WITH MULTIPLE IMAGES
    let productID = localStorage.getItem("viewProduct");
    let products = JSON.parse(localStorage.getItem("products")) || [];
    let currentImageIndex = 0;
    let isZoomed = false;

    // ENHANCE PRODUCTS WITH MULTIPLE IMAGES
    function enhanceProductWithMultipleImages() {
      products.forEach((product, index) => {
        if (!product.images) {
          // Add multiple images for each product
          product.images = [
            product.img, // Main image
            `https://via.placeholder.com/600x600/150013/ffffff?text=${product.name}+1`,
            `https://via.placeholder.com/600x600/1a0018/ffffff?text=${product.name}+2`, 
            `https://via.placeholder.com/600x600/20001c/ffffff?text=${product.name}+3`,
            `https://via.placeholder.com/600x600/250020/ffffff?text=${product.name}+4`
          ];
        }
        
        // Add color variants
        if (!product.colors) {
          product.colors = ["Space Black", "Cosmic Silver", "Stellar Blue", "Nebula Purple"];
        }
        
        // Add specifications
        if (!product.specifications) {
          product.specifications = {
            "Brand": product.category === "Mobiles" ? "Apple/Samsung" : "Premium Brand",
            "Model": product.name,
            "Color": "Multiple Options", 
            "Warranty": "1 Year",
            "Delivery": "2-3 Days",
            "Return Policy": "30 Days Return"
          };
        }
      });
      localStorage.setItem('products', JSON.stringify(products));
    }

    // IF NO PRODUCT SELECTED, GO BACK HOME
    if (productID === null || !products[productID]) {
      document.body.innerHTML = `
        <div class="container text-center mt-5">
          <div class="detail-box">
            <h2 class="text-light">Product Not Found</h2>
            <p class="text-secondary">The product you're looking for doesn't exist.</p>
            <a href="index.html" class="btn btn-premium">Back to Home</a>
          </div>
        </div>
      `;
    } else {
      // ENHANCE PRODUCT DATA
      enhanceProductWithMultipleImages();
      
      // LOAD PRODUCT DETAILS
      let product = products[productID];
      loadProductDetails(product);
    }

    // LOAD PRODUCT DETAILS WITH SLIDER
    function loadProductDetails(product) {
      document.getElementById("detailName").textContent = product.name;
      document.getElementById("detailPrice").textContent = product.price.toLocaleString();
      document.getElementById("detailDesc").textContent = product.desc;

      // LOAD IMAGE SLIDER
      loadImageSlider(product.images);
      
      // LOAD COLOR VARIANTS
      loadColorVariants(product.colors);
      
      // LOAD SPECIFICATIONS
      loadSpecifications(product.specifications);

      // LOAD RELATED PRODUCTS
      loadRelatedProducts(productID, product.category);
    }

    // IMAGE SLIDER FUNCTIONALITY
    function loadImageSlider(images) {
      const mainImage = document.getElementById("mainImage");
      const thumbnailContainer = document.getElementById("thumbnailContainer");
      
      // Set main image
      mainImage.src = images[0];
      
      // Create thumbnails
      thumbnailContainer.innerHTML = '';
      images.forEach((image, index) => {
        const thumbnail = document.createElement('img');
        thumbnail.src = image;
        thumbnail.className = `thumbnail ${index === 0 ? 'active' : ''}`;
        thumbnail.onclick = () => selectImage(index);
        thumbnailContainer.appendChild(thumbnail);
      });
    }

    function selectImage(index) {
      currentImageIndex = index;
      document.getElementById("mainImage").src = products[productID].images[index];
      
      // Update active thumbnail
      document.querySelectorAll('.thumbnail').forEach((thumb, i) => {
        thumb.classList.toggle('active', i === index);
      });
    }

    function changeImage(direction) {
      const images = products[productID].images;
      currentImageIndex = (currentImageIndex + direction + images.length) % images.length;
      selectImage(currentImageIndex);
    }

    function toggleZoom() {
      const image = document.getElementById('mainImage');
      isZoomed = !isZoomed;
      image.classList.toggle('zoomed', isZoomed);
    }

    // COLOR VARIANTS
    function loadColorVariants(colors) {
      const container = document.getElementById('colorVariants');
      container.innerHTML = '';
      
      colors.forEach((color, index) => {
        const colorBtn = document.createElement('button');
        colorBtn.className = `btn btn-sm ${index === 0 ? 'btn-primary' : 'btn-outline-light'}`;
        colorBtn.textContent = color;
        colorBtn.onclick = () => selectColor(colorBtn, color);
        container.appendChild(colorBtn);
      });
    }

    function selectColor(button, color) {
      document.querySelectorAll('#colorVariants button').forEach(btn => {
        btn.className = 'btn btn-sm btn-outline-light';
      });
      button.className = 'btn btn-sm btn-primary';
      
      // Show color selection feedback
      showNotification(`üé® Color selected: ${color}`);
    }

    // SPECIFICATIONS TABLE
    function loadSpecifications(specs) {
      const table = document.getElementById('specsTable');
      table.innerHTML = '';
      
      for (const [key, value] of Object.entries(specs)) {
        table.innerHTML += `
          <tr>
            <td class="spec-label">${key}</td>
            <td class="spec-value">${value}</td>
          </tr>
        `;
      }
    }

    // ADD TO CART FROM DETAIL PAGE
    function addToCartFromDetail() {
      let product = products[productID];
      let cart = JSON.parse(localStorage.getItem("cart")) || [];

      let existing = cart.find(item => item.name === product.name);

      if (existing) {
        existing.qty = (existing.qty || 1) + 1;
      } else {
        let productCopy = {...product};
        productCopy.qty = 1;
        cart.push(productCopy);
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      showNotification("‚úÖ Added to Cart!");
    }

    // BUY NOW FROM DETAIL PAGE
    function buyNowFromDetail() {
      let product = products[productID];
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      
      let productCopy = {...product};
      productCopy.qty = 1;
      cart = [productCopy];
      
      localStorage.setItem("cart", JSON.stringify(cart));
      localStorage.setItem("buyNow", "true");
      window.location.href = "checkout.html";
    }

    // LOAD RELATED PRODUCTS
    function loadRelatedProducts(currentID, category) {
      let relatedBox = document.getElementById("relatedBox");
      relatedBox.innerHTML = "";

      products.forEach((p, i) => {
        if (i != currentID && p.category === category) {
          relatedBox.innerHTML += `
            <div class="col-6 col-md-3">
              <div class="related-card" onclick="viewRelatedProduct(${i})">
                <img src="${p.images[0]}" alt="${p.name}">
                <h6 class="text-light mt-2">${p.name}</h6>
                <p class="text-success">‚Çπ${p.price.toLocaleString()}</p>
              </div>
            </div>
          `;
        }
      });

      if (relatedBox.innerHTML === "") {
        relatedBox.innerHTML = `
          <div class="col-12 text-center">
            <p class="text-secondary">No related products found</p>
          </div>
        `;
      }
    }

    // VIEW RELATED PRODUCT
    function viewRelatedProduct(id) {
      localStorage.setItem("viewProduct", id);
      window.location.reload();
    }

    // NOTIFICATION SYSTEM
    function showNotification(message) {
      const notification = document.createElement('div');
      notification.className = 'alert alert-success position-fixed';
      notification.style.cssText = `
        top: 20px;
        right: 20px;
        z-index: 9999;
        min-width: 250px;
        animation: slideInRight 0.3s ease-out;
        background: rgba(0, 255, 136, 0.9) !important;
        border: 1px solid #00ff88 !important;
        color: #000 !important;
        font-weight: 600;
      `;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 2000);
    }

    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideInRight {
        0% { transform: translateX(100%); opacity: 0; }
        100% { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOutRight {
        0% { transform: translateX(0); opacity: 1; }
        100% { transform: translateX(100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>

</body>
</html>